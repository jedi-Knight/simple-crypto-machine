<html>
<head>
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.2.min.js"></script>
	<script type="text/javascript" src="https://rawgit.com/KathmanduLivingLabs/Ona-PrintView-and-Export-Tool/gh-pages/js/core-min.js"></script>
	<script type="text/javascript" src="https://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/aes.js"></script>
</head>
<body>
<textarea id="crypt" rows="6" cols="40" placeholder="Crypt here"></textarea>
<div id='decrypted'></div>
<textarea id="plaintext" rows="6" cols="40" placeholder="Plaintext here"></textarea>
<div id='encrypted'></div>
<br/>
<input type="password" id="iv" placeholder="IV" password="true"/>
<input type="password" id="passphrase" placeholder="Passphrase" password="true"/>
<style>
	#decrypted, #encrypted{
	  width: 280px;
	  height: 2em;
	}
</style>
<script type="text/javascript">
function encrypt(plaintext, passphrase){
  return CryptoJS.AES.encrypt(plaintext, passphrase, {iv:$('#iv')[0].innerHTML}).toString();
}
function decrypt(crypt, passphrase){
  return CryptoJS.AES.decrypt(crypt, passphrase, {iv:$('#iv')[0].innerHTML}).toString();
}
function fillPlainText(){
	$('#decrypted')[0].innerHTML = decrypt($('#crypt')[0].value, $('#passphrase')[0].value, {iv:$('#iv')[0].value});
}
function fillCrypt(){
	$('#encrypted')[0].innerHTML = encrypt($('#plaintext')[0].value, $('#passphrase')[0].value, {iv:$('#iv')[0].value});
}

$('#passphrase').keyup(function(e){
	fillPlainText();
});
$('#iv').keyup(function(e){
	fillPlainText();
});
$('#crypt').keyup(function(e){
	fillPlainText();
});
$('#plaintext').keyup(function(e){
	fillCrypt();
});

alert(CryptoJS.AES.encrypt("abcd","abcd",{iv:"1"}));


</script>
</body>
</html>
